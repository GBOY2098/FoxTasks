<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Checkbox</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
          rel="stylesheet" 
          integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" 
          crossorigin="anonymous">

          <link rel="stylesheet" href="STATIC/CSS/st2.css" >
  </head>
  <body>
    <body class = 'body'>
        <header class = 'header'>
            <div class="d-flex flex-row m-3">            
                <p class="m-2 mx-4" style = 'font-size: 30px;'>Класс:</p>
                <select class="form-control form-control-sm auditory-select" style="width: 5em;border-radius: 28px 28px 28px 28px;background-color:#c4c4c4;text-align: center;font-size: 30px">
                    <option value="value1">И</option>
                    <option value="value2">Б</option>
                    <option value="value3">З</option>
                </select>
            </div>
            
            <div class="table-container">
                <table class="table table-striped">
                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">Имя</th>
                        <th scope="col">Фамилия</th>
                        <th scope="col">
                          <button  class = 'selected-button' onclick="changeText(this);selectAll(this)" data-show="true"> Скрыть</button> 
                        </th>
                        
                      </tr>
                    </thead>
                    <tbody>
                      {% for student in students %}
                      <tr>
                        <th scope="row">{{ student['num']}}</th>
                        <td>{{ student['name']}}</td>
                        <td>{{ student['surname']}}</td>
                        <td>
                            <div>
                                <label>
                                  <input form="form" name="{{student['num']}}" type="checkbox" class ='checkbox-style'>
                                </label>
                              </div>
                        </td>
                      </tr>
                      {% endfor %} 
                    </tbody>
                  </table>
        </header>
        <form method="post" id="form"> <div>
            <input name="send_work"  type="submit" value="Отправить" class='btn btn-secondary rounded-5 auditory-back-r'>
          </div>
        </form>
      <script type="text/javascript">
        function selectAll(btn) {
              btn.checkValue = (btn.checkValue != "on")? "on" : "off";
              var value = btn.checkValue == "on";
              
              var boxes = document.querySelectorAll("table input[type='checkbox']");
              for (var i = 0; i < boxes.length; i++) {
                boxes[i].checked = value;
              }
            }
            function changeText(ev) {
              if(ev.getAttribute('data-show') === "true") {
                  ev.innerText = "Отмена"
                  ev.setAttribute('data-show', "false"); 
              }
              else {
                  ev.innerText = "Выбор"
                  ev.setAttribute('data-show', "true"); 
              }
          }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
  </body>
</html>
